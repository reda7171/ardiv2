!function(e){"use strict";var t=window.houzez||{};t.OSMUtils=function(){let e="",t="",a="",n="",i=[],o=0,r=0,l=null,s="",p="no",u="",c=!1,d=0;"undefined"!=typeof houzez_vars&&(t=houzez_vars.admin_url+"admin-ajax.php",a=houzez_vars.user_id,n=houzez_vars.not_found,e=houzez_vars.thousands_separator,s=houzez_vars.infoWindowPlac,p=houzez_vars.markerPricePins,u=houzez_vars.api_mapbox,d=parseInt(houzez_vars.houzez_default_radius),c="yes"===houzez_vars.houzez_rtl);let m=()=>!!window.matchMedia("(max-width: 991px)").matches||navigator.userAgentData?.mobile===!0||/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),g=()=>m(),f=e=>{o=e},h=e=>{r=e},v=e=>{l=e},z=e=>{i=e},$=()=>L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),y=(e,t)=>{let a,n=0;return function(...i){let o=this;Date.now(),clearTimeout(a),a=setTimeout(()=>{n=Date.now(),e.apply(o,i)},t)}},b=()=>{};return{init:b,getAjaxUrl:()=>t,getIsMobile:g,getTileLayer:$,getUserID:()=>a,getNotFound:()=>n,getThousandsSeparator:()=>e,getInfoWindowPlac:()=>s,getMarkerPricePins:()=>p,getMapboxAccessToken:()=>u,getMapClusterEnable:()=>1,getClustererZoom:()=>12,getCloseIcon:()=>"",getMarkerSpiderfier:()=>0,getMapType:()=>"roadmap",getGoogleMapStyle:()=>"",getDefaultLat:()=>25.68654,getDefaultLng:()=>-80.431345,getHouzezRtl:()=>c,debounce:y,getDefaultRadius:()=>d,getClusterIcon:()=>"",getMarkers:()=>i,getCurrentMarker:()=>o,getCurrentMarkerId:()=>r,getActivePopup:()=>l,setCurrentMarker:f,setCurrentMarkerId:h,setActivePopup:v,setMarkers:z}}(),t.OSMMap=function(){let a,n,i=[],o=[],r="",l=1,s=12,p="",u="",c=0,d=0,m=0,g="no",f="",h="roadmap",v=!1,z=!1,$=null,y=0,b=0,w=12,k=18,_=0,S=0,C="",M="",P="",T="";"undefined"!=typeof houzez_vars&&(C=houzez_vars.admin_url+"admin-ajax.php",M=houzez_vars.user_id,P=houzez_vars.not_found,T=houzez_vars.thousands_separator,S=parseInt(houzez_vars.is_halfmap),_=parseInt(houzez_vars.auto_load_map_listings));let O=function(e){for(++d>i.length&&(d=1);!1===i[d-1].visible;)++d>i.length&&(d=1);e.setView(i[d-1].getLatLng()),i[d-1]._icon||i[d-1].__parent.spiderfy(),d-1==0||d-1==i.length?setTimeout(function(){i[d-1].fire("click")},500):i[d-1].fire("click")},I=function(e){for(--d<1&&(d=i.length);!1===i[d-1].visible;)--d>i.length&&(d=1);e.setView(i[d-1].getLatLng()),i[d-1]._icon||i[d-1].__parent.spiderfy(),d-1==0||d==i.length?setTimeout(function(){i[d-1].fire("click")},500):i[d-1].fire("click")},x=function(t){e("#listing-mapzoomin").on("click",function(){var e=parseInt(t.getZoom(),10);++e>20&&(e=20),t.setZoom(e),J()})},j=function(t){e("#listing-mapzoomout").on("click",function(){var e=parseInt(t.getZoom(),10);--e<0&&(e=0),t.setZoom(e),J()})},A=function(){for(var e=0;e<i.length;e++)a.removeLayer(i[e]);i=[],n&&a.removeLayer(n)},Z=function(t,a){if(1!==_)return;$&&(clearTimeout($),$=null);let n=e("#houzez-map-message"),i=n.find(".map-info-message");if(t<a){let o=houzez_vars.map_show_some.replace("%s",t).replace("%s",a),r=houzez_vars.zoom_in_show_more;i.html(o+"<br>"+r),n.addClass("show")}else{let l=houzez_vars.map_show_all.replace("%s",a);i.html(l),n.addClass("show")}$=setTimeout(function(){n.removeClass("show")},3e3)},E=function(e){for(var t=[],a=0;a<e.length;a++)e[a].latitude&&e[a].longitude&&t.push([e[a].latitude,e[a].longitude,]);return t},U=function(){if(!a||0===i.length)return;let e=L.latLngBounds();if(i.forEach(function(t){e.extend(t.getLatLng())}),e.getNorthEast().equals(e.getSouthWest())){let t=e.getCenter();a.setView(t,w,{animate:!1});return}let n=a.getBoundsZoom(e);n>w?a.setView(e.getCenter(),w,{animate:!1}):a.fitBounds(e,{animate:!1,padding:[50,50]})},B=function(e,t,a=!1){var o;E(e),1==l&&(n=new L.MarkerClusterGroup({iconCreateFunction:function(e){var t='<div class="houzez-osm-cluster">'+e.getAllChildMarkers().length+"</div>";return L.divIcon({html:t,className:"mycluster",iconSize:L.point(47,47)})},spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0})),console.log(e);for(var r=0;r<e.length;r++){let s=parseFloat(e[r].latitude),p=parseFloat(e[r].longitude);if(!e[r].latitude||!e[r].longitude||isNaN(s)||isNaN(p)||s<-90||s>90||p<-180||p>180){console.warn("Skipping property with invalid coordinates:",{property_id:e[r].property_id,latitude:e[r].latitude,longitude:e[r].longitude});continue}var c=e[r];let d=c.marker_color;var m=L.latLng(s,p),f={riseOnHover:!0};if(c.title&&(f.title=c.title),"yes"==g){var h='<div data-id="'+c.property_id+'" class="osm-marker map-marker-label"'+(d?' style="background-color: '+d+"; border-color: "+d+'; color: #ffffff;"':"")+">"+c.pricePin+"</div>",v=L.divIcon({className:"someclass",iconSize:new L.Point(0,0),html:h});o=1==l?new L.Marker(m,{icon:v}):L.marker(m,{icon:v}).addTo(t)}else{if(c.marker){var z={iconUrl:c.marker,iconSize:[44,56],iconAnchor:[20,57],popupAnchor:[1,-57]};c.retinaMarker&&(z.iconRetinaUrl=c.retinaMarker),f.icon=L.icon(z)}o=1==l?new L.Marker(m,f):L.marker(m,f).addTo(t)}1==l&&n.addLayer(o);var $=document.createElement("div");$.className="property-info-window";var y="";e[r].thumbnail?y+='<div class="info-window-image">'+e[r].featured_label+'<a target="'+e[r].link_target+'" href="'+e[r].url+'"><img class="img-fluid listing-thumbnail" src="'+e[r].thumbnail+'" alt="'+e[r].title+'"/></a></div>':y+='<div class="info-window-image">'+e[r].featured_label+'<a target="'+e[r].link_target+'" href="'+e[r].url+'"><img class="img-fluid listing-thumbnail" src="'+u+'" alt="'+e[r].title+'"/></a></div>',y+='<div class="info-content" style="padding:10px;">',e[r].price&&(y+='<div class="info-window-price">'+e[r].price+"</div>"),y+=e[r].meta,e[r].property_type&&(y+='<div class="info-window-property-type">'+e[r].property_type+"</div>"),y+=e[r].address,y+="</div>",$.innerHTML=y,o.id=c.property_id.toString(),i.push(o),o.bindPopup($)}1==l&&t.addLayer(n),!a&&i.length>0&&U()},D=function(e,t){if(!e)return!1;let a=e.toString();for(var n=t.length,i=0;i<n;i++)if(t[i].id&&t[i].id.toString()===a)return!0;return!1},H=function(e){if(!e){console.log("No marker ID provided to openPopup");return}let t=e.toString();console.log("Opening popup for marker ID:",t),a.eachLayer(function(e){if(void 0!==e._childCount){var a=e.getAllChildMarkers();D(t,a)&&(e.spiderfy(),a.forEach(function(e){e.id&&e.id.toString()===t&&e.openPopup()}))}else e.id&&e.id.toString()===t&&e.openPopup()})},R=function(e){if(!e)return;let t=e.toString();a.eachLayer(function(e){if(void 0!==e._childCount){var n=e.getAllChildMarkers();D(t,n)&&(e.unspiderfy(),n.forEach(function(a){a.id&&a.id.toString()===t&&e.closePopup()}))}else e.id&&e.id.toString()===t&&(e.closePopup(),a.closePopup())})},q=function(){if(!t.OSMUtils.getIsMobile())return e("#half-map-listing-area .hz-map-trigger").each(function(){var t=e(this).data("hz-id");"string"==typeof t?0===t.indexOf("hz-")&&(t=t.replace("hz-","")):t=e(this).data("hz-id").toString().replace(/[^\d.]/g,"");let a=t;e(this).on("mouseenter",function(){console.log("Mouse enter on property ID:",a),H(a)}).on("mouseleave",function(){R(a)})}),!1},N=function(){if(e("#houzez-properties-map").length>0){m=0;let t=e("#radius-range-slider"),a=e("#desktop-search-form");t.on("change",t=>{e('input[name="use_radius"]').prop("checked",!0),e('input[name="ne_lat"]').val(""),e('input[name="ne_lng"]').val(""),e('input[name="sw_lat"]').val(""),e('input[name="sw_lng"]').val(""),e('input[name="zoom"]').val(""),G(null,a)})}},W=function(){if(e("#houzez-properties-map").length>0){m=0;let t=e("#fromSlider_price_range_halfmap"),a=e("#toSlider_price_range_halfmap"),n=e("#desktop-search-form");t.on("change",e=>{G(null,n)}),a.on("change",e=>{G(null,n)})}},F=function(){if(e("#houzez-properties-map").length>0){m=0;let t=e("#fromSlider_price_range_mobile"),a=e("#toSlider_price_range_mobile"),n=e("#mobile-search-form");t.on("change",e=>{G(null,n)}),a.on("change",e=>{G(null,n)})}},V=function(t){var a=t||e("form.houzez-search-filters-js").first();a.length&&a.addClass("loading");var n=a.attr("action");if(void 0==n)return!0;var i=a.find(":input").filter(function(t,a){if(!e(a).prop("disabled")&&""!=e(a).val()&&"search_geolocation"!=e(a).attr("name")&&"search_URI"!=e(a).attr("name")&&"search_args"!=e(a).attr("name")&&"houzez_save_search_ajax"!=e(a).attr("name"))return!0}).serialize();void 0==n?n="":(n.indexOf("?"),n=n+"?"+i),X(n)},G=function(t=null,a=null,n=0){let i=a;if(!i&&t&&(i=t.parents("form")),i.addClass("Current Search Form"),!i||!i.length){console.warn("No valid form found for search");return}e(".hz-halfmap-paged").val(n),V(i),Q(n,i)},J=()=>{if(!_)return;z=!0;let t=e("#desktop-search-form");e("#mobile-search-form.hz-mobile-overlay-search-js").length>0&&(t=e("#mobile-search-form"));let n=a.getBounds();if(n){let i=n.getNorthEast(),o=n.getSouthWest(),r=a.getZoom();e('input[name="ne_lat"]').val(i.lat),e('input[name="ne_lng"]').val(i.lng),e('input[name="sw_lat"]').val(o.lat),e('input[name="sw_lng"]').val(o.lng),e('input[name="zoom"]').val(r),e('input[name="use_radius"]').prop("checked",!1),G(null,t)}},K=()=>{if(!a)return;a.off("dragend");let e=t.OSMUtils.debounce(J,300);a.debouncedMapMoveHandler=e,a.on("dragend",e)},Q=function(n,i){var o=e("#houzez_ajax_container");e(".map-wrap");var r=e("#half-map-listing-area .page-title span"),l=e("#ajax_sort_properties").val(),s=e(".listing-view").data("layout"),p=e(".listing-view").data("css"),u=e(".listing-view").data("view");let c=i.serialize(),d={action:"houzez_half_map_listings",paged:n,sortby:l,item_layout:s,layout_css:p,layout_view:u};d.is_pagination_request=v;let m=c+"&"+e.param(d);return e.ajax({type:"GET",dataType:"json",url:C,data:m,beforeSend:function(){e(".houzez-map-loading").show(),o.empty().append('<div id="houzez-map-loading" class="houzez-map-loading"><div class="mapPlaceholder"><div class="loader-ripple spinner"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div></div></div>')},success:function(n){if(""!=n.query&&e('input[name="search_args"]').val(n.query),""!=n.search_uri&&e('input[name="search_URI"]').val(n.search_uri),e(".map-notfound").remove(),e(".search-no-results-found").remove(),e(".houzez-map-loading").hide(),n.total_results>0){if(!0===n.getProperties){let i=a.getCenter(),l=a.getZoom();A(),B(n.properties,a,z),z&&a.setView(i,l),Z(n.properties.length,n.total_results)}o.empty().html(n.propHtml),r.empty().html(n.total_results),Y(),houzez_listing_lightbox(),houzez_grid_image_gallery(),houzez_grid_call_to_action(),compare_for_ajax_map(),e('[data-bs-toggle="tooltip"]').tooltip(),t.OSMUtils.getIsMobile()||q()}else{A();let s=a.getCenter(),p=a.getZoom();a.setView(s,p),e("#houzez-properties-map").append('<div class="map-notfound" style="z-index: 1000;">'+P+"</div>"),o.empty().html(n.propHtml),r.empty().html(n.total_results)}return!1},complete:function(){v=!1,z=!1,e(".location-trigger").find(".icon-location-target").removeClass("icon-spin")},error:function(e,t,a){console.log(e.status),console.log(e.responseText),console.log(a)}}),!1},X=function(e){window.history.pushState({houzezTheme:!0},"",e)},Y=function(){return e(".houzez_ajax_pagination a").on("click",function(t){t.preventDefault(),_&&(v=!0),m=e(this).data("houzepagi"),e(".hz-halfmap-paged").val(m);let a=e("#desktop-search-form");e("#mobile-search-form.apply-mobile-pagination").length>0&&(a=e("#mobile-search-form")),G(null,a,m)}),!1},ee=function(){Y(),e("#ajax_sort_properties").on("change",function(){let t=e("#desktop-search-form");e(this).hasClass("mobile-sortby")&&(t=e("#mobile-search-form")),G(null,t)}),e("select.houzez_search_ajax, input.houzez_search_ajax").on("change",function(){let t=e(this).closest("form");G(null,t)}),e(".btn-apply, .half-map-search-js-btn, #auto_complete_ajax").on("click",function(t){t.preventDefault();let a=e(this).closest("form");G(null,a)})},et=function(){if(e(".hz-map-field-js").length>0){var t=houzez_vars.geo_country_limit,a=houzez_vars.geocomplete_country,n="";0!=t&&""!=a&&("UAE"==a&&(a="AE"),n=a.toLowerCase());var i=function(e){this.$container=e,this.currentRequest=null,this.requestDelay=300};i.prototype={init:function(){this.initDomElements(),this.autocomplete()},initDomElements:function(){this.addressField=this.$container.data("address-field")},autocomplete:function(){var t=this,a=this.addressField;if(a){var i=document.getElementById(a);if(i){var o=e(i),r=o.parents(".location-search");o.autocomplete({appendTo:"body",source:function(e,a){t.currentRequest&&4!==t.currentRequest.readyState&&t.currentRequest.abort(),clearTimeout(t.searchTimeout),t.searchTimeout=setTimeout(()=>{var i={format:"json",q:e.term,limit:10,addressdetails:1};n&&(i.countrycodes=n),t.currentRequest=jQuery.ajax({url:"https://nominatim.openstreetmap.org/search",type:"GET",data:i,dataType:"json",cache:!1,success:function(e){if(!e.length){a([{value:"",label:"there are no results"},]);return}a(e.map(function(e){return{label:e.display_name,latitude:e.lat,longitude:e.lon,value:e.display_name}}))},error:function(e){"abort"!==e.statusText&&(console.warn("Nominatim API request failed:",e.status,e.statusText),a([{value:"",label:"Search service temporarily unavailable"},]))}})},t.requestDelay)},minLength:2,delay:0,select:function(t,a){if(r.find('input[name="lat"]').val(a.item.latitude),r.find('input[name="lng"]').val(a.item.longitude),r.find('input[name="ne_lat"]').val(""),r.find('input[name="ne_lng"]').val(""),r.find('input[name="sw_lat"]').val(""),r.find('input[name="sw_lng"]').val(""),r.find('input[name="zoom"]').val(""),r.find('input[name="use_radius"]').prop("checked",!0),S){let n=e(this);G(n)}}}),o.autocomplete("widget").css("z-index",99999)}}}};var o=function(){var t=e(this);new i(t).init()};e(".hz-map-field-js").each(o);let r=new Set;e(".location-trigger").on("click",function(t){t.preventDefault();let a=e(this),n=a.parents(".location-search"),i=n.find("input.search_location_js"),o=i.attr("id")||"default";!r.has(o)&&(a.find(".icon-location-target").addClass("icon-spin"),r.add(o),navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){e.get("https://nominatim.openstreetmap.org/reverse",{format:"json",lat:t.coords.latitude,lon:t.coords.longitude,zoom:18,addressdetails:1},function(e){e&&e.display_name?i.val(e.display_name):i.val(houzez_vars.current_location),n.find('input[name="lat"]').val(t.coords.latitude),n.find('input[name="lng"]').val(t.coords.longitude),n.find('input[name="ne_lat"]').val(""),n.find('input[name="ne_lng"]').val(""),n.find('input[name="sw_lat"]').val(""),n.find('input[name="sw_lng"]').val(""),n.find('input[name="zoom"]').val(""),n.find('input[name="use_radius"]').prop("checked",!0),S?G(a):a.find(".icon-location-target").removeClass("icon-spin")},"json").fail(function(e){console.warn("Reverse geocoding failed:",e.status,e.statusText),i.val(houzez_vars.current_location),n.find('input[name="lat"]').val(t.coords.latitude),n.find('input[name="lng"]').val(t.coords.longitude),n.find('input[name="ne_lat"]').val(""),n.find('input[name="ne_lng"]').val(""),n.find('input[name="sw_lat"]').val(""),n.find('input[name="sw_lng"]').val(""),n.find('input[name="zoom"]').val(""),n.find('input[name="use_radius"]').prop("checked",!0),S?G(a):a.find(".icon-location-target").removeClass("icon-spin")}).always(function(){r.delete(o)})},function(e){console.warn("Geolocation failed:",e),a.find(".icon-location-target").removeClass("icon-spin"),r.delete(o)}):(a.find(".icon-location-target").removeClass("icon-spin"),r.delete(o)))})}},ea=function(){e("#houzez-gmap-full-osm").on("click",function(){var t=e(this);t.hasClass("active")?(t.removeClass("active"),t.parents(".map-wrap").removeClass("houzez-fullscreen-map")):(t.parents(".map-wrap").addClass("houzez-fullscreen-map"),t.addClass("active")),a.invalidateSize(),a.panTo(a.getCenter())})},en=function(){e("#houzez-btn-map-view").on("click",function(t){t.preventDefault(),e("#half-map-listing-area, .listing-wrap").hide(),e("#map-view-wrap").show(),e("#mobile-search-form").addClass("hz-mobile-overlay-search-js"),a.invalidateSize(),a.panTo(a.getCenter());var n=E(o);1<n.length&&a.fitBounds(n)}),e("#houzez-btn-listing-view").on("click",function(a){a.preventDefault(),e("#map-view-wrap").hide(),e("#half-map-listing-area, .listing-wrap").show(),e("#mobile-search-form").removeClass("hz-mobile-overlay-search-js"),e(".hz-item-gallery-js").removeClass("houzez-gallery-loaded"),window.setTimeout(function(){t.Core&&"function"==typeof t.Core.reinitializeAjaxFunctions&&t.Core.reinitializeAjaxFunctions()},100)})},ei=function(){if(e("#houzez-properties-map").length>0){let n=e("#houzez-properties-map"),i=n.data("map"),d=n.data("options"),m,v,z=new URLSearchParams(window.location.search),$=z.get("lat"),C=z.get("lng");if($&&C||($=e('input[name="lat"]').val(),C=e('input[name="lng"]').val()),i){try{m="object"==typeof i?i:JSON.parse(i),"object"==typeof d?v=d:d&&(v=JSON.parse(d))}catch(M){console.error("Error parsing map data:",M);return}v&&(r=v.clusterIcon,l=v.map_cluster_enable,s=v.clusterer_zoom,p=v.closeIcon,u=v.infoWindowPlac,c=v.marker_spiderfier,g=v.markerPricePins,h=v.map_type,f=v.googlemap_style,y=parseFloat(v.default_lat),b=parseFloat(v.default_lng),w=parseFloat(v.default_zoom),k=parseFloat(v.max_zoom),$&&C&&!isNaN(parseFloat($))&&!isNaN(parseFloat(C))&&(y=parseFloat($),b=parseFloat(C)),v.center_lat&&v.center_lng&&(y=parseFloat(v.center_lat),b=parseFloat(v.center_lng)));var P=t.OSMUtils.getTileLayer();if(m.properties&&m.properties.length>0){o=m.properties;var T,A=E(m.properties),U={dragging:!0,center:L.latLng(y,b),zoom:w,maxZoom:k,tap:!1,zoomControl:!1,gestureHandling:!0,touchZoom:!0,bounceAtZoomLimits:!1};(a=L.map("houzez-properties-map",U)).scrollWheelZoom.disable(),1<A.length&&a.fitBounds(A),a.addLayer(P),document.getElementById("listing-mapzoomin")&&x(a),document.getElementById("listing-mapzoomout")&&j(a),B(m.properties,a),e(".houzez-map-loading").hide();let D=e("#total-results").data("total-results");D>0&&Z(m.properties.length,D),t.OSMUtils.getIsMobile()||q()}else{o=[];var H={center:[y,b],zoom:w,tap:!1,touchZoom:!0,gestureHandling:!0,bounceAtZoomLimits:!1};(a=L.map("houzez-properties-map",H)).addLayer(P),a.scrollWheelZoom.disable(),e(".houzez-map-loading").hide()}e("#houzez-gmap-next").on("click",function(){O(a)}),e("#houzez-gmap-prev").on("click",function(){I(a)}),en(),ea(),_&&S&&K()}}},eo=function(){ei(),ee(),et(),W(),F(),N()};return{init:eo,reloadMarkers:A,addMarkers:B,getMapBounds:E,mapBounds:U,halfMapListings:Q,searchOnChange:G,setUrl:V,setupInfoboxTrigger:q,triggerPriceRangeSearch:W,triggerPriceRangeSearchMobile:F,triggerDistanceRangeSearch:N}}(),t.SingleAgentOSM=function(){let a,n=function(){if(e("#houzez-agent-sidebar-map").length<=0)return;let n=e("#houzez-agent-sidebar-map").data("lat"),i=e("#houzez-agent-sidebar-map").data("lng");if(""!=n&&""!=i){let o=t.OSMUtils.getTileLayer(),r=L.latLng(n,i),l={dragging:!L.Browser.mobile,center:r,zoom:15,zoomControl:!0,tap:!1,touchZoom:!0,gestureHandling:!0,bounceAtZoomLimits:!1};(a=L.map("houzez-agent-sidebar-map",l)).scrollWheelZoom.disable(),a.addLayer(o)}};return{init:n}}(),t.SinglePropertyOverviewOSM=function(){let a,n=15,i=!1,o="marker",r="no",l,s=function(){if(e("#houzez-overview-listing-map").length<=0)return;let s=e("#houzez-overview-listing-map"),p=s.data("map"),u=s.data("options");if(!p)return;let c,d;try{c="object"==typeof p?p:JSON.parse(p),"object"==typeof u?d=u:u&&(d=JSON.parse(u))}catch(m){console.error("Error parsing map data:",m);return}if(d&&(r=d.markerPricePins,"circle"==(o=d.map_pin_type)&&(i=!0),d.single_map_zoom>0&&(n=parseInt(d.single_map_zoom))),!c.latitude||!c.longitude){console.error("Property coordinates not provided");return}let g=t.OSMUtils.getTileLayer(),f=L.latLng(c.latitude,c.longitude),h={dragging:!L.Browser.mobile,center:f,zoom:n,zoomControl:!0,tap:!1,touchZoom:!0,gestureHandling:!0,bounceAtZoomLimits:!1};if((a=L.map("houzez-overview-listing-map",h)).scrollWheelZoom.disable(),a.addLayer(g),i)L.circle(f,200,{color:"#4f5962",fillColor:"#4f5962",fillOpacity:.35,weight:2,opacity:.8}).addTo(a);else if("yes"===r&&c.pricePin){let v=c.marker_color;var z='<div data-id="'+(c.property_id||c.post_id)+'" class="osm-marker map-marker-label"'+(v?' style="background-color: '+v+"; border-color: "+v+'; color: #ffffff;"':"")+">"+c.pricePin+"</div>",$=L.divIcon({className:"someclass",iconSize:new L.Point(0,0),html:z});l=L.marker(f,{icon:$,riseOnHover:!0}).addTo(a)}else{let y={riseOnHover:!0};if(c.title&&(y.title=c.title),c.marker){let b={iconUrl:c.marker,iconSize:[44,56],iconAnchor:[20,57],popupAnchor:[1,-57]};c.retinaMarker&&(b.iconRetinaUrl=c.retinaMarker),y.icon=L.icon(b)}l=L.marker(f,y).addTo(a)}e('.map-media-tab, a[href="#pills-map"], a[href="#property-address"]').on("shown.bs.tab",function(){setTimeout(()=>{a.invalidateSize(),a.panTo(a.getCenter())},50)})};return{init:s}}(),t.SinglePropertyOSM=function(){let a,n=15,i=!1,o="marker",r="no",l,s,p={},u={mapContainerId:"houzez-single-listing-map",mapLoaderSelector:".houzez-map-loading",streetViewTabSelector:'a[href="#pills-street-view"]',propertyAddressTabSelector:'a[href="#pills-map"], a[href="#property-address"]'},c=function(){let e=document.getElementById(u.mapContainerId);if(!e)return console.error("Map container element not found:",u.mapContainerId),null;let i={dragging:!L.Browser.mobile,center:s,zoom:n,zoomControl:!0,tap:!1,touchZoom:!0,gestureHandling:!0,bounceAtZoomLimits:!1};(a=L.map(u.mapContainerId,i)).scrollWheelZoom.disable();let o=t.OSMUtils.getTileLayer();return a.addLayer(o),p[u.mapContainerId]=a,a},d=function(e){a&&(i?m():g(e))},m=function(){L.circle(s,200,{color:"#4f5962",fillColor:"#4f5962",fillOpacity:.35,weight:2,opacity:.8}).addTo(a)},g=function(e){if("yes"===r&&e.pricePin){let t=e.marker_color;var n='<div data-id="'+(e.property_id||e.post_id)+'" class="osm-marker map-marker-label"'+(t?' style="background-color: '+t+"; border-color: "+t+'; color: #ffffff;"':"")+">"+e.pricePin+"</div>",i=L.divIcon({className:"someclass",iconSize:new L.Point(0,0),html:n});l=L.marker(s,{icon:i,riseOnHover:!0}).addTo(a)}else{let o={riseOnHover:!0};if(e.title&&(o.title=e.title),e.marker){let p={iconUrl:e.marker,iconSize:[44,56],iconAnchor:[20,57],popupAnchor:[1,-57]};e.retinaMarker&&(p.iconRetinaUrl=e.retinaMarker),o.icon=L.icon(p)}l=L.marker(s,o).addTo(a)}},f=function(){e(".map-media-tab, "+u.propertyAddressTabSelector).on("shown.bs.tab",function(){let t=e(e(this).attr("href")),a=t.find('[id^="houzez-single-listing-map"]');if(a.length>0){let n=a.attr("id"),i=p[n];i&&setTimeout(()=>{i.invalidateSize(),i.panTo(i.getCenter())},50)}else Object.values(p).forEach(e=>{e&&setTimeout(()=>{e.invalidateSize(),e.panTo(e.getCenter())},50)})})},h=function(){e(u.mapLoaderSelector).hide()},v=function(){let e=[u.mapContainerId,"houzez-single-listing-map-address","houzez-single-listing-map-elementor",];e.forEach(e=>{var t,l;let p=document.getElementById(e);if(!p)return;let m=p.getAttribute("data-map"),g=p.getAttribute("data-options"),v,z;if(m&&g)try{v=JSON.parse(m),z=JSON.parse(g)}catch($){console.error(`Error parsing map data attributes for ${e}:`,$),h();return}else if("undefined"!=typeof houzez_single_property_map&&"undefined"!=typeof houzez_map_options)v={latitude:houzez_single_property_map.lat,longitude:houzez_single_property_map.lng,title:houzez_single_property_map.title,marker:houzez_single_property_map.marker,retinaMarker:houzez_single_property_map.retinaMarker,pricePin:houzez_single_property_map.pricePin,term_id:houzez_single_property_map.term_id,post_id:houzez_single_property_map.property_id},z=houzez_map_options;else{console.log(`Map container ${e} found, but missing data attributes and global variables.`),h();return}if(u.mapContainerId=e,t=v,l=z,(t&&t.latitude&&t.longitude?(l&&(r=l.markerPricePins||"no","circle"===(o=l.map_pin_type||"marker")&&(i=!0),l.single_map_zoom>0&&(n=parseInt(l.single_map_zoom))),s=L.latLng(t.latitude,t.longitude),false):(console.error("Single property map data (latitude/longitude) is missing."),true))||!(a=c())){h();return}d(v),f(),h()})};return{init:v,config:u,getMapInstances:()=>p,getMapInstance:e=>p[e],resizeAllMaps(){Object.values(p).forEach(e=>{e&&e.invalidateSize&&(e.invalidateSize(),e.panTo(e.getCenter()))})}}}(),e(document).ready(function(){t.OSMUtils.init(),(e("#houzez-properties-map").length>0||e('input[name="search_location"]').length>0)&&t.OSMMap.init(),e("#houzez-agent-sidebar-map").length>0&&t.SingleAgentOSM.init(),e("#houzez-overview-listing-map").length>0&&t.SinglePropertyOverviewOSM.init(),(e("#houzez-single-listing-map").length>0||e("#houzez-single-listing-map-address").length>0||e("#houzez-single-listing-map-elementor").length>0)&&t.SinglePropertyOSM.init()}),window.houzez=t}(jQuery);