!function(e){"use strict";var t=window.houzez||{};t.Maps=function(){let a,r,n=[],i=null,o=[],l=[],s="",p=1,d=12,c="",m="",u=0,g="no",f="",h="roadmap",y="",v="",w="",b="",z=0,k=0,$=0,x=12,I=18,_=0,E=!1,M=!1,C=!1,T=0,L=null;"undefined"!=typeof houzez_vars&&(y=houzez_vars.admin_url+"admin-ajax.php",v=houzez_vars.user_id,w=houzez_vars.not_found,b=houzez_vars.thousands_separator,z=parseInt(houzez_vars.is_halfmap),_=parseInt(houzez_vars.houzez_default_radius),T=parseInt(houzez_vars.auto_load_map_listings));let P=()=>!!window.matchMedia("(max-width: 991px)").matches||navigator.userAgentData?.mobile===!0||/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),A=function(){return{"&amp;":"&","&quot;":'"',"&#039;":"'","&#8217;":"’","&#038;":"&","&lt;":"<","&gt;":">","&#8216;":"‘","&#8230;":"…","&#8221;":"”","&#8211;":"\xe2€“","&#8212;":"\xe2€”"}},j=function(e){switch(h){case"hybrid":e.mapTypeId=google.maps.MapTypeId.HYBRID;break;case"terrain":e.mapTypeId=google.maps.MapTypeId.TERRAIN;break;case"satellite":e.mapTypeId=google.maps.MapTypeId.SATELLITE;break;default:e.mapTypeId=google.maps.MapTypeId.ROADMAP}return e},S=function(e){if(++u>o.length&&(u=1),o[u-1]){let t=o[u-1],a=t.propertyId;a&&V(a)}},D=function(e){if(--u<1&&(u=o.length),o[u-1]){let t=o[u-1],a=t.propertyId;a&&V(a)}},B=function(e){let t=document.getElementById("listing-mapzoomin");t&&t.addEventListener("click",function(){var t=parseInt(e.getZoom(),10);++t>20&&(t=20),e.setZoom(t),console.log(t),es()})},R=function(e){let t=document.getElementById("listing-mapzoomout");t&&t.addEventListener("click",function(){var t=parseInt(e.getZoom(),10);--t<0&&(t=0),e.setZoom(t),es()})},Z=function(e){return"roadmap"===e?a.setMapTypeId(google.maps.MapTypeId.ROADMAP):"satellite"===e?a.setMapTypeId(google.maps.MapTypeId.SATELLITE):"hybrid"===e?a.setMapTypeId(google.maps.MapTypeId.HYBRID):"terrain"===e&&a.setMapTypeId(google.maps.MapTypeId.TERRAIN),!1},F=function(){google.maps.event.addListener(a,"tilesloaded",function(){jQuery(".houzez-map-loading").hide()})},N=function(){0!=p&&null!=i&&i.clearMarkers()},O=function(){for(var e=0;e<o.length;e++)o[e].setMap(null);o=[]},H=function(){let e=new google.maps.LatLngBounds;for(let t=0;t<o.length;t++)o[t].position&&e.extend(o[t].position);a.fitBounds(e),google.maps.event.addListenerOnce(a,"bounds_changed",function(){let e=x;a.getZoom()>e&&a.setZoom(e)})},U=(e,t,{strokeColor:a="#4f5962",strokeOpacity:r=.8,strokeWeight:n=2,fillColor:i="#4f5962",fillOpacity:o=.35,radius:l=300,...s}={})=>{let p={strokeColor:a,strokeOpacity:r,strokeWeight:n,fillColor:i,fillOpacity:o,radius:l,...s,map:e,center:t};return new google.maps.Circle(p)},W=async(e,t,a,{propertyId:r=t&&t.property_id?t.property_id.toString():null,...n}={})=>{if(!t)return null;let i=t.marker;window.devicePixelRatio>1.5&&t.retinaMarker&&(i=t.retinaMarker);let o="";if(t.title){let l=A();o=t.title.replace(/\&[\w\d\#]{2,5}\;/g,e=>l[e])}let s=document.createElement("div");s.style.position="relative";let p=document.createElement("img");p.src=i,p.style.width="44px",p.style.height="56px",s.appendChild(p);let d=new google.maps.marker.AdvancedMarkerElement({map:e,position:a,content:s,title:o,...n});return d.propertyId=r,d},q=function(t,a){if(1!==T)return;L&&(clearTimeout(L),L=null);let r=e("#houzez-map-message"),n=r.find(".map-info-message");if(t<a){let i=houzez_vars.map_show_some.replace("%s",t).replace("%s",a),o=houzez_vars.zoom_in_show_more;n.html(i+"<br>"+o),r.addClass("show")}else{let l=houzez_vars.map_show_all.replace("%s",a);n.html(l),r.addClass("show")}L=setTimeout(function(){r.removeClass("show")},3e3)},G=function(){e(".houzezMapType").on("click",function(t){t.preventDefault();var a=e(this).data("maptype");Z(a)}),document.getElementById("listing-mapzoomin")&&B(a),document.getElementById("listing-mapzoomout")&&R(a),e("#houzez-gmap-next").on("click",function(){S(a)}),e("#houzez-gmap-prev").on("click",function(){D(a)})},Y=async function(e,t,a=!1){let c=null,u=null;c=t.getCenter(),u=t.getZoom(),n=function(){for(;l.length>0;)l.pop().close()};var f=function(e,t,a){t.addListener("gmp-click",function(){n(),a.open({anchor:t,map:e}),l.push(a);var r=a.getContent().getElementsByClassName("listing-thumbnail");for(let i=0;i<r.length;i++)r[i].dataset.src&&(r[i].src=r[i].dataset.src)})};let h=A(),y={};for(var v=0;v<e.length;v++){let w=parseFloat(e[v].latitude),b=parseFloat(e[v].longitude);if(!e[v].latitude||!e[v].longitude||isNaN(w)||isNaN(b)||w<-90||w>90||b<-180||b>180){console.warn("Skipping property with invalid coordinates:",{property_id:e[v].property_id,latitude:e[v].latitude,longitude:e[v].longitude});continue}let z=`${w.toFixed(6)}_${b.toFixed(6)}`;y[z]||(y[z]={lat:w,lng:b,properties:[]}),y[z].properties.push(e[v])}for(let k in y){let $=y[k],x=new google.maps.LatLng($.lat,$.lng),I=$.properties;r.extend(x);let _,E="",M=I[0],C=M.property_id.toString(),T=M.marker_color;if(I.length>1?E=`${I.length} properties at this location`:M.title&&(E=M.title.replace(/\&[\w\d\#]{2,5}\;/g,function(e){return h[e]})),"yes"==g){let L=document.createElement("div");L.className="gm-marker map-marker-label",L.dataset.id=M.property_id,L.style.position="relative",T&&(L.style.backgroundColor=T,L.style.borderColor=T,L.style.color="#ffffff");let P=document.createElement("div");if(P.className="gm-marker-price",P.innerHTML=M.pricePin,L.appendChild(P),I.length>1){let j=document.createElement("div");j.style.position="absolute",j.style.top="-8px",j.style.right="-8px",j.style.backgroundColor="#333333",j.style.color="#ffffff",j.style.borderRadius="50%",j.style.width="18px",j.style.height="18px",j.style.fontSize="10px",j.style.fontWeight="bold",j.style.display="flex",j.style.alignItems="center",j.style.justifyContent="center",j.style.border="2px solid #ffffff",j.style.boxShadow="0 2px 4px rgba(0,0,0,0.2)",j.style.zIndex="1",j.textContent=I.length,L.appendChild(j)}(_=new google.maps.marker.AdvancedMarkerElement({map:t,position:x,content:L,title:E})).propertyId=C}else{let S=M.marker;window.devicePixelRatio>1.5&&M.retinaMarker&&(S=M.retinaMarker);let D=document.createElement("div");D.style.position="relative";let B=document.createElement("img");if(B.src=S,B.style.width="44px",B.style.height="56px",D.appendChild(B),D.style.outline="none",D.style.border="none",D.style.boxShadow="none",D.addEventListener("focus",e=>{e.target.style.outline="none",e.target.style.border="none",e.target.style.boxShadow="none"}),I.length>1){let R=document.createElement("div");R.style.position="absolute",R.style.top="-5px",R.style.right="-5px",R.style.backgroundColor="#333333",R.style.color="#ffffff",R.style.borderRadius="50%",R.style.width="20px",R.style.height="20px",R.style.fontSize="11px",R.style.fontWeight="bold",R.style.display="flex",R.style.alignItems="center",R.style.justifyContent="center",R.style.border="2px solid #ffffff",R.style.boxShadow="0 2px 4px rgba(0,0,0,0.2)",R.textContent=I.length,D.appendChild(R)}(_=new google.maps.marker.AdvancedMarkerElement({map:t,position:x,content:D,title:E})).propertyId=C}I.length>1&&(_.groupedProperties=I);var Z=document.createElement("div");Z.className="property-info-window";var F="";if(1===I.length){let N=I[0];N.thumbnail?F+='<div class="info-window-image">'+N.featured_label+'<a target="'+N.link_target+'" href="'+N.url+'"><img class="img-fluid listing-thumbnail" src="'+m+'" data-src="'+N.thumbnail+'" alt="'+N.title+'"/></a></div>':F+='<div class="info-window-image">'+N.featured_label+'<a target="'+N.link_target+'" href="'+N.url+'"><img class="img-fluid listing-thumbnail" src="'+m+'" alt="'+N.title+'"/></a></div>',F+='<div class="info-content" style="padding:10px;">',N.price&&(F+='<div class="info-window-price">'+N.price+"</div>"),F+=N.meta,N.property_type&&(F+='<div class="info-window-property-type">'+N.property_type+"</div>"),F+=N.address,F+="</div>"}else{F+='<div class="info-window-multiple-properties" style="position: relative;">',F+='<div style="max-height: 240px; overflow-y: auto; padding: 10px; scrollbar-width: thin; scrollbar-color: #ccc #f5f5f5;" class="info-window-scrollable">';for(let O=0;O<I.length;O++){let U=I[O],W=O===I.length-1;F+='<div class="info-window-property-item" data-property-id="'+U.property_id+'" style="'+(W?"":"border-bottom: 1px solid #eee; ")+'padding: 10px 0; display: flex; gap: 10px;">',F+='<div style="flex-shrink: 0;">',U.thumbnail?F+='<a target="'+U.link_target+'" href="'+U.url+'"><img class="listing-thumbnail" src="'+m+'" data-src="'+U.thumbnail+'" alt="'+U.title+'" style="width: 80px; height: 60px; object-fit: cover; border-radius: 4px;"/></a>':F+='<a target="'+U.link_target+'" href="'+U.url+'"><img class="listing-thumbnail" src="'+m+'" alt="'+U.title+'" style="width: 80px; height: 60px; object-fit: cover; border-radius: 4px;"/></a>',F+="</div>",F+='<div style="flex: 1; min-width: 0;">',F+='<h5 style="margin: 0 0 5px 0; font-size: 14px; font-weight: 600;"><a target="'+U.link_target+'" href="'+U.url+'" style="color: #333; text-decoration: none;">'+(U.title||"Property "+(O+1))+"</a></h5>",U.price&&(F+='<div style="font-weight: 600; font-size: 14px; margin-bottom: 3px;">'+U.price+"</div>"),U.property_type&&(F+='<div style="font-size: 12px; color: #666;">'+U.property_type+"</div>"),F+="</div>",F+="</div>"}F+="</div>",F+="</div>"}if(Z.innerHTML=F,I.length>1){let q=document.createElement("style");q.textContent=`
                        .info-window-scrollable::-webkit-scrollbar {
                            width: 6px;
                        }
                        .info-window-scrollable::-webkit-scrollbar-track {
                            background: #f5f5f5;
                            border-radius: 3px;
                        }
                        .info-window-scrollable::-webkit-scrollbar-thumb {
                            background: #ccc;
                            border-radius: 3px;
                        }
                        .info-window-scrollable::-webkit-scrollbar-thumb:hover {
                            background: #999;
                        }
                    `,Z.appendChild(q)}if(!document.getElementById("houzez-marker-styles")){let G=document.createElement("style");G.id="houzez-marker-styles",G.textContent=`
                        /* Remove blue border/outline from Google Maps markers */
                        .gm-style .gm-style-iw-c,
                        .gm-style .gm-style-iw-d,
                        .gm-style-iw,
                        .gm-style-iw-c,
                        .gmp-marker-view,
                        [role="button"]:focus,
                        [role="button"]:active {
                            outline: none !important;
                            border: none !important;
                            box-shadow: none !important;
                        }
                        
                        /* Remove focus styles from advanced markers */
                        gmp-advanced-marker,
                        .gmp-advanced-marker {
                            outline: none !important;
                            border: none !important;
                            box-shadow: none !important;
                        }
                        
                        /* Remove focus styles from marker content */
                        
                        
                        /* Ensure property highlighting works */
                        .info-window-property-item.property-highlighted {
                            background-color: #f0f8ff !important;
                        }
                    `,document.head.appendChild(G)}f(t,_,new google.maps.InfoWindow({content:Z,maxWidth:350})),o.push(_)}if(a||H(),0!=p)try{i&&("function"==typeof i.clearMarkers?i.clearMarkers():"function"==typeof i.clear&&i.clear()),void 0!==window.markerClusterer?i=new window.markerClusterer.MarkerClusterer({map:t,markers:o,algorithm:new window.markerClusterer.GridAlgorithm({maxZoom:parseInt(d),gridSize:60}),renderer:{render({count:e,position:t}){let a=document.createElement("div");return a.className="houzez-cluster-marker",a.style.backgroundImage=`url(${s})`,a.style.width="48px",a.style.height="48px",a.style.backgroundSize="contain",a.style.display="flex",a.style.justifyContent="center",a.style.alignItems="center",a.style.color="#ffffff",a.style.fontWeight="bold",a.textContent=e,new google.maps.marker.AdvancedMarkerElement({position:t,content:a})}},onClusterClick(e,t,a){let r=new google.maps.LatLngBounds;t.markers.forEach(e=>{r.extend(e.position)});let n=a.getZoom();a.fitBounds(r),t.markers.length>1&&google.maps.event.addListenerOnce(a,"bounds_changed",()=>{let e=Math.min(n+1,16);a.getZoom()>e&&a.setZoom(e)})}}):console.error("MarkerClusterer library not found. Make sure it is properly loaded.")}catch(Y){console.error("Error initializing marker clustering:",Y)}},K=(e,t)=>{if(!t||!e||0===e.length)return null;let a=t.toString();for(let r=0;r<e.length;r++){let n=e[r];if(n.propertyId===a)return{marker:n,index:r};if(n.groupedProperties){for(let i=0;i<n.groupedProperties.length;i++)if(n.groupedProperties[i].property_id.toString()===a)return{marker:n,index:r,propertyIndex:i}}}return null},V=function(e){if(!e){console.log("No property ID provided to openInfoWindowById");return}let t=e;"string"==typeof t&&0===t.indexOf("hz-")&&(t=t.replace("hz-","")),n();let a=K(o,t);if(!a)return console.log("No marker found for property ID:",t),!1;{let r=a.marker;return r.content?r.content.click():r.click(),void 0!==a.propertyIndex&&setTimeout(()=>{J(t)},100),!0}},J=function(e){let t=document.querySelector('.info-window-property-item[data-property-id="'+e+'"]');if(t){Q(),t.style.transition="background-color 0.3s ease",t.classList.add("property-highlighted"),t.style.setProperty("background-color","#f0f8ff","important");let a=t.closest(".info-window-scrollable");if(a){let r=t.offsetTop;a.clientHeight,t.offsetHeight,0===r?a.scrollTop=0:a.scrollTop=Math.max(0,r-10)}}},Q=function(){let e=document.querySelectorAll(".property-highlighted");e.forEach(e=>{e.style.backgroundColor="",e.classList.remove("property-highlighted")})},X=function(){P()||e("#half-map-listing-area .hz-map-trigger").each(function(){var t=e(this).data("hz-id");"string"==typeof t?0===t.indexOf("hz-")&&(t=t.replace("hz-","")):t=e(this).data("hz-id").toString().replace(/[^\d.]/g,"");let r=t;e(this).on("mouseenter",function(){a&&V(r)}),e(this).on("mouseleave",function(){Q(),n()})})},ee=function(t,r){var n=e("#houzez_ajax_container"),i=e("#half-map-listing-area .page-title span"),o=e("#ajax_sort_properties").val(),l=e(".listing-view").data("layout"),s=e(".listing-view").data("css"),p=e(".listing-view").data("view");let d=r.serialize(),c={action:"houzez_half_map_listings",paged:t,sortby:o,item_layout:l,layout_css:s,layout_view:p};c.is_pagination_request=M;let m=d+"&"+e.param(c);return e.ajax({type:"GET",dataType:"json",url:y,data:m,beforeSend:function(){e(".houzez-map-loading").show(),n.empty().append('<div id="houzez-map-loading" class="houzez-map-loading"><div class="mapPlaceholder"><div class="loader-ripple spinner"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div></div></div>')},success:function(t){if(""!=t.query&&e('input[name="search_args"]').val(t.query),""!=t.search_uri&&e('input[name="search_URI"]').val(t.search_uri),e(".map-notfound").remove(),e(".search-no-results-found").remove(),e(".houzez-map-loading").hide(),t.total_results>0){if(!0===t.getProperties){let r=a.getCenter(),o=a.getZoom();N(),O(),Y(t.properties,a,C),C&&r&&o&&(a.setCenter(r),a.setZoom(o)),q(t.properties.length,t.total_results)}n.empty().html(t.propHtml),i.empty().html(t.total_results),ed(),houzez_listing_lightbox(),houzez_grid_image_gallery(),houzez_grid_call_to_action(),compare_for_ajax(),P()||X(),e('[data-bs-toggle="tooltip"]').tooltip()}else{N(),O();let l=a.getCenter(),s=a.getZoom();C&&l&&s&&(a.setCenter(l),a.setZoom(s)),B(a),R(a),e("#houzez-properties-map").append('<div class="map-notfound">'+w+"</div>"),n.empty().html(t.propHtml),i.empty().html(t.total_results)}return!1},complete:function(){M=!1,C=!1,E=!1,e(".location-trigger").find(".icon-location-target").removeClass("icon-spin")},error:function(e,t,a){console.log(e.status),console.log(e.responseText),console.log(thrownError)}}),!1},et=function(){if(e("#houzez-properties-map").length>0){let t=e("#radius-range-slider"),a=e("#desktop-search-form");t.on("change",t=>{e('input[name="use_radius"]').prop("checked",!0),e('input[name="ne_lat"]').val(""),e('input[name="ne_lng"]').val(""),e('input[name="sw_lat"]').val(""),e('input[name="sw_lng"]').val(""),e('input[name="zoom"]').val(""),el(null,a)})}},ea=function(){if(e("#houzez-properties-map").length>0){let t=e("#fromSlider_price_range_halfmap"),a=e("#toSlider_price_range_halfmap"),r=e("#desktop-search-form");t.on("change",e=>{el(null,r)}),a.on("change",e=>{el(null,r)})}},er=function(){if(e("#houzez-properties-map").length>0){let t=e("#fromSlider_price_range_mobile"),a=e("#toSlider_price_range_mobile"),r=e("#mobile-search-form");t.on("change",e=>{el(null,r)}),a.on("change",e=>{el(null,r)})}},en=e=>{window.history.pushState({houzezTheme:!0},"",e)},ei=function(t){var a=t||e("form.houzez-search-filters-js").first();a.length&&a.addClass("loading");var r=a.attr("action");if(void 0==r)return!0;var n=a.find(":input").filter(function(t,a){if(!e(a).prop("disabled")&&""!=e(a).val()&&"search_geolocation"!=e(a).attr("name")&&"search_URI"!=e(a).attr("name")&&"search_args"!=e(a).attr("name")&&"houzez_save_search_ajax"!=e(a).attr("name"))return!0}).serialize();void 0==r?r="":(r.indexOf("?"),r=r+"?"+n),en(r)},eo=function(){e("#houzez-gmap-full").on("click",function(){var t=e(this);t.hasClass("active")?(t.removeClass("active"),t.parents(".map-wrap").removeClass("houzez-fullscreen-map")):(t.parents(".map-wrap").addClass("houzez-fullscreen-map"),t.addClass("active"))})},el=function(t=null,a=null,r=0){if(E)return;let n=a;if(!n&&t&&(n=t.parents("form")),!n||!n.length){console.warn("No valid form found for search");return}E=!0,e(".hz-halfmap-paged").val(r),ei(n),ee(r,n)},es=()=>{if(!T)return;C=!0;let t=e("#desktop-search-form");e("#mobile-search-form.hz-mobile-overlay-search-js").length>0&&(t=e("#mobile-search-form"));let r=a.getBounds();if(r){let n=r.getNorthEast(),i=r.getSouthWest(),o=a.getZoom();e('input[name="ne_lat"]').val(n.lat()),e('input[name="ne_lng"]').val(n.lng()),e('input[name="sw_lat"]').val(i.lat()),e('input[name="sw_lng"]').val(i.lng()),e('input[name="zoom"]').val(o),e('input[name="use_radius"]').prop("checked",!1),el(null,t)}},ep=()=>{let e=!1,t=0;google.maps.event.clearListeners(a,"idle"),google.maps.event.clearListeners(a,"dragend"),google.maps.event.clearListeners(a,"dragstart"),google.maps.event.clearListeners(a,"zoom_changed"),google.maps.event.addListener(a,"dragstart",function(){e=!0}),google.maps.event.addListener(a,"dragend",function(){!E&&e&&(es(),t=Date.now()),e=!1})},ed=function(){return e(".houzez_ajax_pagination a").on("click",function(t){t.preventDefault(),T&&(M=!0);let a=e(this).data("houzepagi"),r=e("#desktop-search-form");e("#mobile-search-form.apply-mobile-pagination").length>0&&(r=e("#mobile-search-form")),el(null,r,a)}),!1},ec=function(){ed(),e("#ajax_sort_properties").on("change",function(){let t=e("#desktop-search-form");e(this).hasClass("mobile-sortby")&&(t=e("#mobile-search-form")),el(null,t)}),e("select.houzez_search_ajax, input.houzez_search_ajax").on("change",function(){var t=e(this).closest("form");el(null,t)}),e(".half-map-wrap").length>0&&e(".btn-apply, .half-map-search-js-btn, #auto_complete_ajax").on("click",function(t){t.preventDefault();let a=e(this).closest("form");el(null,a)})},em=function(){e("#houzez-btn-map-view").on("click",function(t){t.preventDefault(),e("#half-map-listing-area, .listing-wrap").hide(),e("#map-view-wrap").show(),e("#mobile-search-form").addClass("hz-mobile-overlay-search-js"),google.maps.event.trigger(a,"resize"),H()}),e("#houzez-btn-listing-view").on("click",function(a){a.preventDefault(),e("#map-view-wrap").hide(),e("#half-map-listing-area, .listing-wrap").show(),e("#mobile-search-form").removeClass("hz-mobile-overlay-search-js"),e(".hz-item-gallery-js").removeClass("houzez-gallery-loaded"),window.setTimeout(function(){t.Core&&"function"==typeof t.Core.reinitializeAjaxFunctions&&t.Core.reinitializeAjaxFunctions()},100)})},eu=function(){if(e(".hz-map-field-js").length>0){var t=houzez_vars.geo_country_limit,a=houzez_vars.geocomplete_country,r=function(e){this.$container=e};r.prototype={init:function(){this.initDomElements(),this.autocomplete()},initDomElements:function(){this.addressField=this.$container.data("address-field")},autocomplete:function(){var r=this,n=this.addressField;if(null!==n){var i=document.getElementById(n),o=new google.maps.places.Autocomplete(i,{types:["geocode","establishment"]});0!=t&&""!=a&&("UAE"==a&&(a="AE"),o.setComponentRestrictions({country:[a]})),google.maps.event.addListener(o,"place_changed",function(){var t=o.getPlace(),a=new google.maps.LatLng(t.geometry.location.lat(),t.geometry.location.lng());r.updateCoordinate(a),z&&(i=e(i),el(i))})}},updateCoordinate:function(t){e('input[name="lat"]').val(t.lat()),e('input[name="lng"]').val(t.lng()),e('input[name="ne_lat"]').val(""),e('input[name="ne_lng"]').val(""),e('input[name="sw_lat"]').val(""),e('input[name="sw_lng"]').val(""),e('input[name="zoom"]').val(""),e('input[name="use_radius"]').prop("checked",!0)}};var n=function(){var t,a=e(this);(t=new r(a)).init()};e(".hz-map-field-js").each(n),e(".location-trigger").on("click",function(t){t.preventDefault();let a=e(this),r=a.parents(".location-search").find("input.search_location_js");a.find(".icon-location-target").addClass("icon-spin"),navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(t){let n=new google.maps.Geocoder,i=new google.maps.LatLng(t.coords.latitude,t.coords.longitude);n.geocode({location:i},function(n,i){i===google.maps.GeocoderStatus.OK&&n[0]?r.val(n[0].formatted_address):r.val(houzez_vars.current_location),e('input[name="lat"]').val(t.coords.latitude),e('input[name="lng"]').val(t.coords.longitude),e('input[name="ne_lat"]').val(""),e('input[name="ne_lng"]').val(""),e('input[name="sw_lat"]').val(""),e('input[name="sw_lng"]').val(""),e('input[name="zoom"]').val(""),e('input[name="use_radius"]').prop("checked",!0),z?el(a):a.find(".icon-location-target").removeClass("icon-spin")})})})}},eg=async function(){if(e("#houzez-properties-map").length>0){let t=e("#houzez-properties-map"),n=t.data("map"),i=t.data("options"),o,l,u=new URLSearchParams(window.location.search),y=u.get("lat"),v=u.get("lng");if(y&&v||(y=e('input[name="lat"]').val(),v=e('input[name="lng"]').val()),n){try{o="object"==typeof n?n:JSON.parse(n),"object"==typeof i?l=i:i&&(l=JSON.parse(i))}catch(w){console.error("Error parsing map data:",w);return}if(l){s=l.clusterIcon,p=l.map_cluster_enable,d=l.clusterer_zoom,c=l.closeIcon,m=l.infoWindowPlac,g=l.markerPricePins,h=l.map_type,f=l.googlemap_style,k=parseFloat(l.default_lat),$=parseFloat(l.default_lng),x=parseFloat(l.default_zoom),I=parseFloat(l.max_zoom),y&&v&&!isNaN(parseFloat(y))&&!isNaN(parseFloat(v))&&(k=parseFloat(y),$=parseFloat(v)),l.center_lat&&l.center_lng&&(k=parseFloat(l.center_lat),$=parseFloat(l.center_lng));var b={zoom:x,maxZoom:I,disableDefaultUI:!0,scrollwheel:!1,center:new google.maps.LatLng(k,$),mapId:l.mapId}}if(b=j(b),a=new google.maps.Map(document.getElementById("houzez-properties-map"),b),r=new google.maps.LatLngBounds,F(),o.properties&&o.properties.length>0){await Y(o.properties,a),P()||X();let _=e("#total-results").data("total-results");_>0&&q(o.properties.length,_)}else{var b={center:new google.maps.LatLng(k,$),zoom:x,maxZoom:I,disableDefaultUI:!0,scrollwheel:!1,mapId:l.mapId};a=new google.maps.Map(document.getElementById("houzez-properties-map"),b),jQuery(".houzez-map-loading").hide()}G(),T&&z&&ep()}}},ef=async function(){"object"==typeof google&&"object"==typeof google.maps&&(eg(),ec(),em(),eu()),ea(),er(),et(),eo()},eh=async(e,t,a)=>{if(!t)return null;let r=document.createElement("div");r.className="gm-marker map-marker-label",r.dataset.id=t.property_id;let n=document.createElement("div");n.className="gm-marker-price",n.innerHTML=t.pricePin,r.appendChild(n);let i=new google.maps.marker.AdvancedMarkerElement({map:e,position:a,content:r});return i.propertyId=t.property_id.toString(),i};return{init:ef,addMarkers:Y,clearClusterer:N,reloadMarkers:O,mapBounds:H,halfMapAjax:ee,setUrl:ei,searchOnChange:el,changeMapType:Z,initInfoboxTrigger:X,removeMapLoader:F,createMapCircle:U,createStandardMarker:W,createPricePin:eh,triggerPriceRangeSearch:ea,triggerPriceRangeSearchMobile:er,triggerDistanceRangeSearch:et}}(),t.SingleAgentMap=function(){let t=null,a=async()=>{if(e("#houzez-agent-sidebar-map").length<=0)return;let a=e("#houzez-agent-sidebar-map").data("lat"),r=e("#houzez-agent-sidebar-map").data("lng");if(""!=a&&""!=r){let n=new google.maps.LatLng(a,r);t=new google.maps.Map(document.getElementById("houzez-agent-sidebar-map"),{center:n,zoom:15,disableDefaultUI:!0,scrollwheel:!1,mapId:"HOUZEZ_MAP_ID"});let i=new google.maps.marker.PinElement({background:"#1DABE3",borderColor:"#FFFFFF",glyphColor:"#FFFFFF"});new google.maps.marker.AdvancedMarkerElement({map:t,position:n,content:i.element})}};return{init:a}}(),t.SinglePropertyOverviewMap=function(){let a,r=null,n=async()=>{if(e("#houzez-overview-listing-map").length<=0)return;let n,i,o,l=e("#houzez-overview-listing-map"),s=l.data("map"),p=l.data("options");if(!s)return;let d=15,c="",m=!1,u="marker",g="no",f="HOUZEZ_MAP_ID";if(p)try{n="object"==typeof p?p:JSON.parse(p)}catch(h){console.error("Error parsing map options:",h)}try{"object"==typeof s||(s=JSON.parse(s))}catch(y){console.error("Error parsing map data:",y);return}if(!s.latitude||!s.longitude){console.error("Property coordinates not provided");return}if(n&&(o=n.closeIcon,i=n.infoWindowPlac,g=n.markerPricePins,u=n.map_pin_type,c=n.googlemap_style,f=n.mapId||"HOUZEZ_MAP_ID","circle"==u&&(m=!0),n.single_map_zoom>0&&(d=parseInt(n.single_map_zoom)),c))try{"string"==typeof c&&(c=JSON.parse(c))}catch(v){console.error("Error parsing Google Maps style:",v),c=""}let w=new google.maps.LatLng(s.latitude,s.longitude),b={center:w,zoom:parseInt(d),disableDefaultUI:!1,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.ROADMAP,mapId:f};if(a=new google.maps.Map(document.getElementById("houzez-overview-listing-map"),b),m)t.Maps.createMapCircle(a,w);else{let{AdvancedMarkerElement:z}=google.maps.marker;if("yes"===g&&s.pricePin){let k=document.createElement("div");k.className="gm-marker map-marker-label",k.dataset.id=s.property_id||s.post_id,s.marker_color&&(k.style.backgroundColor=s.marker_color,k.style.borderColor=s.marker_color,k.style.color="#ffffff");let $=document.createElement("div");$.className="gm-marker-price",$.innerHTML=s.pricePin,k.appendChild($),r=new z({map:a,position:w,content:k,title:s.title||""})}else{let x=s.marker;window.devicePixelRatio>1.5&&s.retinaMarker&&(x=s.retinaMarker);let I=document.createElement("div");I.style.position="relative";let _=document.createElement("img");_.src=x,_.style.width="44px",_.style.height="56px",I.appendChild(_),r=new z({map:a,position:w,content:I,title:s.title||""})}}};return{init:n}}(),t.SinglePropertyMap=function(){let a=null,r=null,n=0,i=null,o=async({mapContainerId:e="houzez-single-listing-map",streetViewContainerId:t="pills-street-view",zoomInBtnId:r="listing-mapzoomin",zoomOutBtnId:n="listing-mapzoomout",mapTypeSelector:o=".houzezMapType",streetViewTabSelector:d='a[href="#pills-street-view"]',propertyData:c=null,mapOptions:m={}}={})=>{let u=document.getElementById(e);if(!u){console.log("Map container not found:",e);return}if(!c)try{let g=u.getAttribute("data-map");g&&(c="object"==typeof g?g:JSON.parse(g))}catch(f){console.error("Error parsing property data:",f);return}if(0===Object.keys(m).length)try{let h=u.getAttribute("data-options");h&&(m="object"==typeof h?h:JSON.parse(h))}catch(y){console.error("Error parsing map options:",y)}if(!c||!c.latitude||!c.longitude){console.error("Property coordinates not provided");return}i=new google.maps.LatLng(c.latitude,c.longitude);let v={center:i,zoom:parseInt(m.single_map_zoom)||15,disableDefaultUI:!1,scrollwheel:!1,mapId:m.mapId};switch(m.mapType){case"hybrid":v.mapTypeId=google.maps.MapTypeId.HYBRID;break;case"terrain":v.mapTypeId=google.maps.MapTypeId.TERRAIN;break;case"satellite":v.mapTypeId=google.maps.MapTypeId.SATELLITE;break;default:v.mapTypeId=google.maps.MapTypeId.ROADMAP}a=new google.maps.Map(u,v),l({map:a,zoomInBtnId:r,zoomOutBtnId:n,mapTypeSelector:o}),await s({map:a,propertyData:c,position:i,showCircle:"circle"===m.map_pin_type,markerPricePins:m.markerPricePins}),p({map:a,position:i,streetViewTabSelector:d,streetViewContainerId:t})},l=({map:e,zoomInBtnId:t,zoomOutBtnId:a,mapTypeSelector:r})=>{if(!e)return},s=async({map:e,propertyData:a,position:r,showCircle:n=!1,markerPricePins:i="no"})=>{if(e&&r){if(n)t.Maps.createMapCircle(e,r);else{let{AdvancedMarkerElement:o}=google.maps.marker,l;if("yes"===i&&a.pricePin){let s=document.createElement("div");s.className="gm-marker map-marker-label",s.dataset.id=a.property_id,a.marker_color&&(s.style.backgroundColor=a.marker_color,s.style.borderColor=a.marker_color,s.style.color="#ffffff");let p=document.createElement("div");p.className="gm-marker-price",p.innerHTML=a.pricePin,s.appendChild(p),l=new o({map:e,position:r,content:s,title:a.title})}else{let d=a.marker;window.devicePixelRatio>1.5&&a.retinaMarker&&(d=a.retinaMarker);let c=document.createElement("div");c.style.position="relative";let m=document.createElement("img");m.src=d,m.style.width="44px",m.style.height="56px",c.appendChild(m),l=new o({map:e,position:r,content:c,title:a.title})}l&&l.addListener("gmp-click",()=>{})}}},p=({map:t,position:a,streetViewTabSelector:i,streetViewContainerId:o})=>{if(!t||!a)return;let l=e(i);0!==l.length&&l.on("shown.bs.tab",()=>{n++;let e=document.getElementById(o);e&&(n<=1?r=new google.maps.StreetViewPanorama(e,{position:a,pov:{heading:34,pitch:10}}):r&&r.setPosition(a))})},d=()=>{["houzez-single-listing-map","houzez-single-listing-map-address","houzez-single-listing-map-elementor",].forEach(t=>{let a=document.getElementById(t);if(a)try{let r=a.getAttribute("data-map"),n=a.getAttribute("data-options");if(!r)return;let i="object"==typeof r?r:JSON.parse(r),l=n?"object"==typeof n?n:JSON.parse(n):{};o({mapContainerId:t,propertyData:i,mapOptions:l}).catch(e=>{console.error(`Error initializing single property map (${t}):`,e)})}catch(s){console.error(`Error initializing property map (${t}):`,s),e(".houzez-map-loading").hide()}})};return{init:d,loadMapFromDOM:d}}(),window.houzez=t}(jQuery);